(e=>{"use strict";e(document).ready(()=>{e("#doaction,#doaction2").click(function(n){n.preventDefault();const a=e(this).prev("select").val(),t=[];if(e(".billing-user:checked").each(function(n,a){t.push(e(a).val())}),!t.length)return!1;switch(a){case"update":e.post(ShareeBilling.endpoint,{action:"user_billing",_wpnonce:ShareeBilling.nonce,year:e('select[name="year"]').val(),month:e('select[name="monthnum"]').val(),user_ids:t}).done(e=>{alert(e.message),e.success&&window.location.reload()}).fail(e=>{let n=ShareeBilling.defaultError;e.responseJSON&&e.responseJSON.data&&(n=e.responseJSON.data.message),window.console&&console.log(e),alert(n)});break;case"download":const n=new Date,a=window.prompt(ShareeBilling.transferDate,[n.getMonth()+1,n.getDate()].map(function(e){return("0"+e).slice(-2)}).join(""));if(!a)return;const o=e('form[target="sharee-csv-downloader"]');o.find('input[name="year"]').val(e('select[name="year"]').val()),o.find('input[name="month"]').val(e('select[name="monthnum"]').val()),o.find('input[name="date"]').val(a),o.find("p").empty(),t.forEach(e=>{o.find("p").append(`<input type="checkbox" name="user_ids[]" value="${e}" checked />`)}),o.submit()}})})})(jQuery);