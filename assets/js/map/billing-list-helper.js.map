{"version":3,"sources":["billing-list-helper.js"],"names":["$","document","ready","click","e","action","this","val","preventDefault","ids","each","index","input","push","post","endpoint","ShareeBilling","year","month","user_ids","done","alert","result","success","message","window","location","defaultError","response","responseJSON","data","console","log","dateObj","Date","date","prompt","transferDate","getMonth","getDate","map","num","slice","join","$form","find","empty","id","jQuery"],"mappings":"cAIA,SAAAA,GAIEA,EAAAC,UAAAC,MAAA,WAGEF,EAAG,wBAAyBG,MAAO,SAAUC,GAD5CH,EAAAA,iBACE,IAAAI,EAAAL,EAAAM,MAAyBH,KAAO,UAAAI,MAC/BC,EAAAA,GAIAC,GAHFT,EAAA,yBAA+BU,KAAhB,SAAfC,EAAAC,GACAH,EAAIA,KAAJT,EAAcY,GAAAL,UAERM,EAAMb,OADZ,OAAA,EAIE,OAAOK,GACR,IAAA,SACDL,EAAAc,KAAST,cAATU,SAAA,CACEV,OAAA,eACIS,SAAME,cAAcD,MACpBE,KAAAjB,EAAU,uBADoBO,MAE9BW,MAAAlB,EAAYgB,2BAFkBT,MAG9BY,SAAWV,IACXW,KAAA,SAASpB,GACTqB,MAAAC,EAAYb,SALda,EAMSC,SACPF,OAAOC,SAAOE,WAEZC,KAAAA,SAAOC,GACR,IAAAF,EAAAR,cAAAW,aAVHC,EAWSC,cAAgBD,EAAAC,aAAAC,OACvBN,EAAIA,EAAUR,aAAcW,KAAAA,SAE1BH,OAAUI,SACXG,QAAAC,IAAAJ,GAECG,MAAAA,KAEFV,MACD,IApBD,WAqBA,IAAAY,EAAA,IAAAC,KACGC,EAALV,OAAAW,OAAApB,cAAAqB,aAAA,CAAAJ,EAAAK,WAAA,EAAAL,EAAAM,WAAAC,IAAA,SAAAC,GACE,OAAMR,IAAUQ,GAAAC,OAAhB,KACAC,KAAMR,KACJ,IAAAA,EADuD,OAIvD,IAAAS,EAAA5C,EAAA,wCACD4C,EAAAC,KAAA,sBAAAtC,IAAAP,EAAA,uBAAAO,OACDqC,EAAMA,KAAQ5C,uBAAGO,IAAAP,EAAA,2BAAjBO,OACAqC,EAAMC,KAAM,sBAAuBtC,IAAQ4B,GAC3CS,EAAMC,KAAM,KAAAC,QACZF,EAAAA,QAAY,SAAAG,EAAApC,GACZiC,EAAMC,KAAN,KAAkBC,OAAlBF,mDAAAG,EAAAH,kBAEEA,EAAAA,SACD,MACDA,QACA,YA1DV,CAMEI","file":"../billing-list-helper.js","sourcesContent":["/**\n * Description\n */\n\n/*global ShareeBilling: false*/\n\n( ( $ ) => {\n\n  'use strict';\n\n  $( document ).ready( () => {\n    $( '#doaction,#doaction2' ).click( function( e ) {\n      e.preventDefault();\n      const action = $( this ).prev( 'select' ).val();\n      let ids = []; // Grab user ids.\n      $( '.billing-user:checked' ).each( function( index, input ) {\n        ids.push( $( input ).val() );\n      });\n      if ( ! ids.length ) {\n        return false;\n      }\n      switch ( action ) {\n        case 'update':\n          $.post( ShareeBilling.endpoint, {\n            'action': 'user_billing',\n            '_wpnonce': ShareeBilling.nonce,\n            'year': $( 'select[name=\"year\"]' ).val(),\n            'month': $( 'select[name=\"monthnum\"]' ).val(),\n            'user_ids': ids\n          }).done( ( result ) => {\n            alert( result.message );\n            if ( result.success ) {\n              window.location.reload();\n            }\n          }).fail( ( response ) => {\n            let message = ShareeBilling.defaultError;\n            if ( response.responseJSON && response.responseJSON.data ) {\n              message = response.responseJSON.data.message;\n            }\n            if ( window.console ) {\n              console.log( response );\n            }\n            alert( message );\n          });\n          break;\n        case 'download':\n          const dateObj = new Date();\n          const date = window.prompt( ShareeBilling.transferDate,  [ dateObj.getMonth() + 1,  dateObj.getDate() ].map( function( num ) {\n            return ( '0' + num ).slice( -2 );\n          }).join( '' ) );\n          if ( ! date ) {\n            return;\n          }\n          const $form = $( 'form[target=\"sharee-csv-downloader\"]' );\n          $form.find( 'input[name=\"year\"]' ).val( $( 'select[name=\"year\"]' ).val() );\n          $form.find( 'input[name=\"month\"]' ).val( $( 'select[name=\"monthnum\"]' ).val() );\n          $form.find( 'input[name=\"date\"]' ).val( date );\n          $form.find( 'p' ).empty();\n          ids.forEach( ( id, index )=>{\n            $form.find( 'p' ).append( `<input type=\"checkbox\" name=\"user_ids[]\" value=\"${id}\" checked />` );\n          });\n          $form.submit();\n          break;\n        default:\n          return;\n      }\n    });\n  });\n\n})( jQuery );\n"]}