{"version":3,"sources":["billing-list-helper.js"],"names":["$","document","ready","click","e","action","this","val","preventDefault","ids","each","index","input","push","post","endpoint","ShareeBilling","year","month","user_ids","done","alert","result","success","message","window","location","defaultError","response","responseJSON","data","console","log","$form","dateObj","Date","date","prompt","transferDate","getMonth","getDate","map","num","slice","join","find","empty","id","jQuery"],"mappings":"aAIA,CAAA,SAAAA,GAIEA,EAAAC,QAAA,EAAAC,MAAA,WAGEF,EAAG,sBAAH,EAA4BG,MAAO,SAAUC,GAD5CH,EAAAA,eAAAA,EACE,IAAAI,EAAAL,EAAAM,IAAA,EAAyBH,KAAO,QAAhC,EAAgCI,IAAhC,EACCC,EAAAA,GAIAC,GAHFT,EAAA,uBAAA,EAA+BU,KAAhB,SAAfC,EAAAC,GACAH,EAAIA,KAAJT,EAAcY,CAAd,EAAcL,IAAd,CAAA,CACAP,CAFA,EAGES,CAAII,EAAMb,OADZ,MAAA,CAAA,EAIE,OAAOK,GACR,IAAA,SACDL,EAAAc,KAAST,cAATU,SAAA,CACEV,OAAA,eACIS,SAAME,cAAcD,MACpBE,KAAAjB,EAAU,qBAAV,EAD8BO,IAC9B,EACAW,MAAAlB,EAAYgB,yBAAZ,EAF8BT,IAE9B,EACAY,SAAWV,CALjB,CAAA,EAMMW,KAAA,SAASpB,GACTqB,MAAAC,EAAYb,OAAZ,EALFa,EAMSC,SACPF,OAAOC,SAAOE,OAAdH,CAEEI,CAXR,EAWQA,KAAAA,SAAOC,GACR,IAAAF,EAAAR,cAAAW,aAVHC,EAWSC,cAAgBD,EAAAC,aAAAC,OACvBN,EAAIA,EAAUR,aAAcW,KAAAA,SAE1BH,OAAUI,SACXG,QAAAC,IAAAJ,CAAA,EAECG,MAAAA,CAAAA,CACD,CApBP,EAqBMV,MACD,IApBD,WAqBA,IAOEY,EAPFC,EAAA,IAAAC,KACGC,EAALX,OAAAY,OAAArB,cAAAsB,aAAA,CAAAJ,EAAAK,SAAA,EAAA,EAAAL,EAAAM,QAAA,GAAAC,IAAA,SAAAC,GACE,OAAMR,IAAUQ,GAAAC,MAAhB,CAAA,CAAMT,CACN,CAFF,EAEEU,KAAMR,EAFR,CAAA,EAGIA,KAGAH,EAAAjC,EAAA,sCAAA,GACD6C,KAAA,oBAAA,EAAAtC,IAAAP,EAAA,qBAAA,EAAAO,IAAA,CAAA,EACD0B,EAAMA,KAAQjC,qBAAd,EAAiBO,IAAAP,EAAA,yBAAA,EAAjBO,IAAiB,CAAjB,EACA0B,EAAMY,KAAM,oBAAZZ,EAAmC1B,IAAQ6B,CAA3CH,EACAA,EAAMY,KAAM,GAAZZ,EAAYa,MAAZb,EACAA,EAAAA,QAAY,SAAAc,EAAApC,GACZsB,EAAMY,KAAN,GAAAZ,EAAkBa,OAAlBb,mDAAAc,EAAAd,cAAAA,CACAxB,CAFAwB,EAGEA,EAAAA,OAAAA,GACD,MACDA,QACA,MA3CF,CA6CE,CArDN,CAUE,CAbJ,CAJF,EAMEe,MANF","file":"../billing-list-helper.js","sourcesContent":["/**\n * Description\n */\n\n/*global ShareeBilling: false*/\n\n( ( $ ) => {\n\n  'use strict';\n\n  $( document ).ready( () => {\n    $( '#doaction,#doaction2' ).click( function( e ) {\n      e.preventDefault();\n      const action = $( this ).prev( 'select' ).val();\n      let ids = []; // Grab user ids.\n      $( '.billing-user:checked' ).each( function( index, input ) {\n        ids.push( $( input ).val() );\n      });\n      if ( ! ids.length ) {\n        return false;\n      }\n      switch ( action ) {\n        case 'update':\n          $.post( ShareeBilling.endpoint, {\n            'action': 'user_billing',\n            '_wpnonce': ShareeBilling.nonce,\n            'year': $( 'select[name=\"year\"]' ).val(),\n            'month': $( 'select[name=\"monthnum\"]' ).val(),\n            'user_ids': ids\n          }).done( ( result ) => {\n            alert( result.message );\n            if ( result.success ) {\n              window.location.reload();\n            }\n          }).fail( ( response ) => {\n            let message = ShareeBilling.defaultError;\n            if ( response.responseJSON && response.responseJSON.data ) {\n              message = response.responseJSON.data.message;\n            }\n            if ( window.console ) {\n              console.log( response );\n            }\n            alert( message );\n          });\n          break;\n        case 'download':\n          const dateObj = new Date();\n          const date = window.prompt( ShareeBilling.transferDate,  [ dateObj.getMonth() + 1,  dateObj.getDate() ].map( function( num ) {\n            return ( '0' + num ).slice( -2 );\n          }).join( '' ) );\n          if ( ! date ) {\n            return;\n          }\n          const $form = $( 'form[target=\"sharee-csv-downloader\"]' );\n          $form.find( 'input[name=\"year\"]' ).val( $( 'select[name=\"year\"]' ).val() );\n          $form.find( 'input[name=\"month\"]' ).val( $( 'select[name=\"monthnum\"]' ).val() );\n          $form.find( 'input[name=\"date\"]' ).val( date );\n          $form.find( 'p' ).empty();\n          ids.forEach( ( id, index )=>{\n            $form.find( 'p' ).append( `<input type=\"checkbox\" name=\"user_ids[]\" value=\"${id}\" checked />` );\n          });\n          $form.submit();\n          break;\n        default:\n          return;\n      }\n    });\n  });\n\n})( jQuery );\n"]}